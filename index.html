<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>导航网站</title>
    <link rel="stylesheet" href="./css/style.css">
</head>
<body>
    <div id="header-wrap">
        <div id="header"></div>
    </div>
    <main>
        <div id="main" class="wrapper">
            
        </div>
    </main>
    <footer></footer>
    <script>
        keys = {
            '0':{
                "0":'q',
                "1":'w',
                "2":'e',
                "3":'r',
                "4":'t',
                "5":'y',
                "6":'u',
                "7":'i',
                "8":"o",
                "9":"p",
                "length":10
            },
            '1':{
                "0":'a',
                "1":'s',
                "2":'d',
                "3":'f',
                "4":'g',
                "5":'h',
                "6":'j',
                "7":'k',
                "8":"l",
                "length":9
            },
            "2":{
                "0":'z',
                "1":'x',
                "2":'c',
                "3":'v',
                "4":'b',
                "5":'n',
                "6":'m',
                "length":7
            },
            "length":3
        }

        hash = {
            "q":"https://www.qq.com",
            "w":"https://weibo.com",
            "e":"https://element.eleme.cn",
            "r":"http://ruanyifeng.com",
            "t":"https://www.taobao.com",
            "y":"https://www.youtube.com",
            "u":"https://unsplash.com",
            "i":"http://iciba.com",
            "o":"https://www.opera.com",
            "p":"https://www.patreon.com",
            "a":"https://www.apple.com",
            "s":"https://svpg.com",
            "d":"https://dribbble.com",
            "f":"https://fanyi.baidu.com",
            "g":"http://google.com",
            "h":"https://www.highcharts.com",
            "j":"https://jenkins.io",
            "k":"https://www.keithcirkel.co.uk",
            "l":"https://lanhuapp.com",
            "z":"https://www.zhihu.com",
            "x":"https://xueqiu.com",
            "c":"https://css-tricks.com",
            "v":"https://visualgo.net",
            "b":"https://www.bootcdn.cn",
            "n":"https://nodejs.org",
            "m":"https://mi.com"
        }

        // 拿浏览器存储的 hash 覆盖原始的 hash
        // 取出 localStorage 中的 updateUrl 对应的 hash
        // 这样保证 hash 优先取用户之前设置的
            hashInLocalStorage = JSON.parse(localStorage.getItem("updateUrl") || 'null');
            if (hashInLocalStorage) {
                hash = hashInLocalStorage;
            }

        // 遍历 keys，生成 kbd 标签
        index = 0
        while( index < keys['length'] ){ // index 的值：0 1 2
            // 创建 div
            divObj = document.createElement("div");
            main.appendChild(divObj);
            row = keys[index] // index2 的值：第一个数组 第二个数组 第三个数组

            index2 = 0;
            while( index2 < row['length'] ){ // 0～9 0～8 0～6
                // 创建 kdb
                kbdObj = document.createElement("kbd");
                kbdObj.textContent = row[index2];
                buttonObj = document.createElement("button");
                buttonObj.textContent = "E";
                buttonObj.id = row[index2];
                
                // 编辑 hash
                buttonObj.onclick = function(buttonClicked){
                    // 被用户点击的那个按钮
                    key = buttonClicked['target']['id']; // q w e r t ...
                    dialog = prompt("请输入键位[7]对应的网站地址");
                    hash[key] = dialog;  // hash 变更

                    // hash 变更了，就存
                    localStorage.setItem('updateUrl',JSON.stringify(hash));
                }
                
                divObj.appendChild(kbdObj);
                kbdObj.appendChild(buttonObj);

                index2 = index2 + 1;
            }

            index = index + 1;
        }

        // 监听鼠标事件
        document.onkeypress = function (presskey) {
            // presskey 包含你按键的时候的所有信息
            // 用户按了哪个键
            key = presskey['key'];

            // 对应的网站
            website = hash[key];

            console.log(hash);

            // 模拟用户在地址栏输入
            // location.href = website;

            // 模拟用户新窗口打开网页
            window.open("http://" + website,'_blank')
        }
    </script>
</body>
</html>